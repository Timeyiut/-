<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3063/3063822.png">
    <title>ç³–å°¿ç—…å‹æ¸›é‡æ»¾å‹•ä¿®æ­£ç³»çµ±</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --primary: #2c3e50; --accent: #27ae60; --danger: #e74c3c; }
        body { font-family: -apple-system, sans-serif; background: #f4f7f6; margin: 0; padding: 15px; }
        .card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 15px; }
        h2 { color: var(--primary); font-size: 1.2rem; margin-top: 0; }
        .input-group { margin-bottom: 15px; }
        label { display: block; font-size: 0.9rem; color: #666; margin-bottom: 5px; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: var(--accent); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .result-box { background: #e8f5e9; padding: 15px; border-radius: 10px; border-left: 5px solid var(--accent); }
        .warning { background: #fff3e0; border-left: 5px solid #ff9800; padding: 10px; font-size: 0.85rem; margin-top: 10px; }
    </style>
</head>
<body>

    <div class="card">
        <h2>ğŸ“Š æ•¸æ“šè¼¸å…¥ (é€£å‹• Garmin/FatSecret)</h2>
        <div class="input-group">
            <label>ç›®å‰é«”é‡ (kg)</label>
            <input type="number" id="currentWeight" value="90" step="0.1">
        </div>
        <div class="input-group">
            <label>éå» 7 å¤©å¹³å‡æ¯æ—¥æ”å– (FatSecret)</label>
            <input type="number" id="avgIntake" value="2000">
        </div>
        <div class="input-group">
            <label>éå» 7 å¤©å¹³å‡é‹å‹•æ¶ˆè€— (Garmin)</label>
            <input type="number" id="avgExercise" value="400">
        </div>
        <button onclick="calculateProgress()">åŸ·è¡Œæ»¾å‹•å¼ä¿®æ­£</button>
    </div>

    <div class="card result-box" id="resultCard" style="display:none;">
        <h2>ğŸ¯ ä¸‹é€±åŸ·è¡Œæ–¹é‡</h2>
        <p id="tdeeText"></p>
        <p id="targetIntake" style="font-size: 1.2rem; font-weight: bold; color: var(--accent);"></p>
        <div class="warning" id="dmWarning">
            âš ï¸ <b>ç³–å°¿ç—…å®‰å…¨æé†’ï¼š</b><br>
            åµæ¸¬åˆ°ç†±é‡ç¼ºå£ï¼Œé‹å‹•å‰è«‹ç›£æ¸¬è¡€ç³–ï¼Œè‹¥ä½æ–¼ 100mg/dL è«‹è£œå…… 15g å¿«é†£ã€‚
        </div>
    </div>

    <script>
        function calculateProgress() {
            const weight = parseFloat(document.getElementById('currentWeight').value);
            const intake = parseFloat(document.getElementById('avgIntake').value);
            const exercise = parseFloat(document.getElementById('avgExercise').value);
            
            // åŸºç¤åƒæ•¸
            const bmr = 1850; 
            const targetWeight = 80; // BMI 28.5 ç›®æ¨™
            
            // æ»¾å‹• TDEE è¨ˆç®— (å‡è¨­æ€§æ¼”ç®—æ³•ï¼šç°¡åŒ–ç‰ˆ)
            // çœŸå¯¦ TDEE = æ”å–ç†±é‡ + (é«”é‡è®ŠåŒ– * 7700 / 7 å¤©)
            // é€™è£¡æˆ‘å€‘å…ˆè¨­å®šä¸€å€‹å»ºè­°æ”å–å€¼
            let suggestedIntake = Math.max(bmr, (intake + exercise) - 500);

            document.getElementById('resultCard').style.display = 'block';
            document.getElementById('tdeeText').innerHTML = `è·é›¢ç›®æ¨™é«”é‡é‚„å‰©: <b>${(weight - targetWeight).toFixed(1)} kg</b>`;
            document.getElementById('targetIntake').innerHTML = `ä¸‹é€±æ¯æ—¥å»ºè­°æ”å–ï¼š${suggestedIntake.toFixed(0)} kcal`;
            
            if (suggestedIntake <= 1850) {
                document.getElementById('dmWarning').innerHTML += "<br>â— å·²é”ä»£è¬ä¸‹é™ï¼Œå»ºè­°å¢åŠ é‹å‹•é‡è€Œéå‰Šæ¸›é£²é£Ÿã€‚";
            }
        }
    </script>
</body>
</html>